var Lightbox=function(){var config={template:"lightbox.html",closeLinkSelector:"#close",openLightboxSelector:'[rel="lightbox"]'};var _addEventListener=function(el,eventName,handler){if(el.addEventListener){el.addEventListener(eventName,handler)}else{el.attachEvent("on"+eventName,function(){handler.call(el)})}};var _getFileContents=function(template,callback){request=new XMLHttpRequest;request.onreadystatechange=function(){if(request.readyState==4&&request.status==200){callback(request.responseText)}};request.open("GET",template,true);request.send()};var _buildLightbox=function(e){_getFileContents(config.template,function(response){var el=document.createElement("div");if(el.classList)el.classList.add("lightbox");else el.className+=" "+"lightbox";el.innerHTML+=response;var overlay=document.createElement("div");if(overlay.classList)overlay.classList.add("overlay");else overlay.className+=" "+"overlay";document.body.appendChild(overlay);document.body.appendChild(el);var closeLinks=document.querySelectorAll(config.closeLinkSelector);for(var i=0;i<closeLinks.length;i++){_addEventListener(closeLinks[i],"click",_destroyLightbox)}var overlayClose=document.querySelectorAll(".overlay");for(var i=0;i<overlayClose.length;i++){overlayClose[i].onclick=_destroyLightbox}});returnValue(e)};var _destroyLightbox=function(e){var lightbox=document.querySelectorAll(".lightbox");for(var i=0;i<lightbox.length;i++){lightbox[i].parentNode.removeChild(lightbox[i])}var overlay=document.querySelectorAll(".overlay");for(var i=0;i<overlay.length;i++){overlay[i].parentNode.removeChild(overlay[i])}returnValue(e)};var returnValue=function(event){if(!event)event=window.event;if(event.returnValue){event.returnValue=false}else if(event.stopPropagation){event.stopPropagation()}else{event.cancelBubble=true}};var init=function(options){for(var prop in options){if(options.hasOwnProperty(prop)){config[prop]=options[prop]}}var links=document.querySelectorAll(config.openLightboxSelector);for(var i=0;i<links.length;i++){_addEventListener(links[i],"click",_buildLightbox)}document.onkeydown=function(evt){evt=evt||window.event;if(evt.keyCode==27){_destroyLightbox()}}};return{init:init}}();
//# sourceMappingURL=dist/lightbox.min.js.map